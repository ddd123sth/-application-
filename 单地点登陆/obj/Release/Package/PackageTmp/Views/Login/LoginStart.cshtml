
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <script src="~/Scripts/jquery-3.3.1.js"></script>
    <title>LoginStart</title>
</head>
<body>
    <div>
        <input type="text" id="txt" />
        <input type="button" value="登录" onclick="Logout()" />
        <input type="button" value="检测是否被强制下线" onclick="CheckIsForcedLogout()" />
        <input type="button" value="跳转" onclick="tiaozhuan()"/>
    </div>
</body>
</html>
<script>
    $(document).ready(function () {
        //定时检测是否被强制下线
            setInterval(function () {
                CheckIsForcedLogout();
            }, 5000);
    });

    function tiaozhuan() {
        location.href = "/Login/LoginTwo";
    }

    //登录方法
    function Logout() {
        $.ajax({
            url: "/Login/LoginDeng",
            data: {userId:$("#txt").val()},
            type: "POST",
            dataType: "text",
            success: function (msg) {
                alert(msg);
            },
        });
    }

    //检测是否被强制下线
    function CheckIsForcedLogout() {
        $.ajax({
            url: "/Login/CheckIsForcedLogout",
            type: "POST",
            dataType: "text",
            success: function (msg) {
                if (msg != "Failed") {
                    alert(msg);
                }
                
                //if (msg.OperateResult == "Success") {
                //    $.messager.alert('', msg.OperateData, 'error', function () {
                //        alert("该跳转页面了");
                //    });
                //}
            },
            error: function (ex) { }
        });
    }
</script>
